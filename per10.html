<!DOCTYPE html>
<html lang="id">
<head>
    <link rel="stylesheet" href="style.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Pertemuan 10 - Viewing dan Clipping (Interaktif)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Styling untuk konten */
        .pertemuan-content-area h1 {
            /* color: #2c3e50; */
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            font-size: 2.2em;
        }
        
        .pertemuan-content-area h2 {
            color: #2c3e50;
            margin: 30px 0 20px;
            font-size: 1.8em;
        }
        
        .pertemuan-content-area h3 {
            color: #3498db;
            margin: 25px 0 15px;
            font-size: 1.4em;
        }
        
        .pertemuan-content-area p {
            margin-bottom: 15px;
            font-size: 1.05em;
            line-height: 1.6;
        }
        
        /* Interactive Section Styling */
        .interactive-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .interactive-section h3 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .control-group label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .input-item {
            display: flex;
            align-items: center;
        }
        
        .input-item span {
            width: 50px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .input-item input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
        }
        
        .button-group button {
            flex: 1;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .button-group button:hover {
            background-color: #2980b9;
        }
        
        .canvas-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            position: relative;
        }
        
        canvas {
            display: block;
            margin: 0 auto;
            border: 1px solid #ced4da;
            background-color: white;
            border-radius: 4px;
            width: 100%;
            height: auto;
        }
        
        .info {
            margin-top: 15px;
            padding: 10px;
            background-color: #e9f7fe;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        
        /* Formula and Algorithm Styling */
        .formula-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            border-left: 4px solid #3498db;
        }
        
        .formula-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        /* Math Formula Styling */
        .math-container {
            overflow-x: auto;
            margin: 15px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        /* Custom LaTeX-like Math Rendering */
        .math {
            font-family: 'Times New Roman', Times, serif;
            padding: 5px 0;
            line-height: 1.5;
            text-align: center;
            font-size: 1.1em;
        }
        
        .math-inline {
            font-family: 'Times New Roman', Times, serif;
            white-space: nowrap;
            padding: 0 3px;
        }
        
        .frac {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
        }
        
        .frac > span {
            display: block;
        }
        
        .frac .num {
            border-bottom: 1px solid;
            padding: 0 3px;
        }
        
        .frac .den {
            padding: 0 3px;
        }
        
        .sqrt {
            position: relative;
            display: inline-block;
        }
        
        .sqrt::before {
            content: "√";
            font-size: 1.2em;
            position: absolute;
            left: -0.6em;
            top: -0.1em;
        }
        
        .sqrt > span {
            padding-left: 0.6em;
            border-top: 1px solid;
        }
        
        .sup {
            vertical-align: super;
            font-size: 0.8em;
            line-height: 0;
        }
        
        .sub {
            vertical-align: sub;
            font-size: 0.8em;
            line-height: 0;
        }
        
        /* Algorithm Steps Styling */
        .algorithm-steps {
            counter-reset: step;
            margin: 20px 0;
            padding-left: 20px;
        }
        
        .algorithm-step {
            position: relative;
            padding: 10px 0 10px 35px;
            margin-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .algorithm-step:last-child {
            border-bottom: none;
        }
        
        .algorithm-step::before {
            counter-increment: step;
            content: counter(step);
            position: absolute;
            left: 0;
            top: 10px;
            width: 25px;
            height: 25px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        /* Example Calculation Styling */
        .example-calculation {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #d0e3ff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .example-calculation h4 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .calculation-step {
            margin: 15px 0;
            padding: 10px;
            background-color: white;
            border-radius: 6px;
            border-left: 3px solid #3498db;
        }
        
        .calculation-step h5 {
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .calculation-result {
            font-weight: bold;
            margin-top: 10px;
            padding: 10px;
            background-color: #e9f7fe;
            border-radius: 4px;
        }
        
        /* Code Block Styling */
        pre {
            background-color: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        
        code {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        /* Responsive Design */
        @media screen and (max-width: 768px) {
            .pertemuan-content-area h1 {
                font-size: 1.8em;
            }
            
            .pertemuan-content-area h2 {
                font-size: 1.5em;
            }
            
            .pertemuan-content-area h3 {
                font-size: 1.2em;
            }
            
            .interactive-section {
                padding: 15px 10px;
            }
            
            pre {
                font-size: 0.8em;
                padding: 10px;
            }
            
            .example-calculation {
                padding: 15px;
            }
        }
        
        /* Small mobile devices */
        @media screen and (max-width: 480px) {
            .pertemuan-content-area h1 {
                font-size: 1.6em;
            }
            
            .interactive-section {
                padding: 10px 8px;
            }
            
            .control-group label {
                font-size: 14px;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .info {
                font-size: 13px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Structure -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-graduation-cap"></i> Menu</h3>
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        </div>
        <a href="index.html" class="menu-item"><i class="fas fa-chart-pie"></i> DASHBOARD</a>
        <a href="per1.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 1</a>
        <a href="per2.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 2</a>
        <a href="per3.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 3</a>
        <a href="per4.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 4</a>
        <a href="per5.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 5</a>
        <a href="per6.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 6</a>
        <a href="per7.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 7</a>
        <a href="per8.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 8</a>
        <a href="per9.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 9</a>
        <a href="per10.html" class="menu-item active"><i class="fas fa-book"></i> Pertemuan 10</a> <!-- Active link -->
        <a href="per11.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 11</a>
        <a href="per12.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 12</a>
        <a href="per13.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 13</a>
        <a href="per14.html" class="menu-item"><i class="fas fa-book"></i> Pertemuan 14</a>
    </div>

    <!-- Main Content Structure -->
    <div id="main">
        <button class="openbtn" onclick="openNav()"><i class="fas fa-bars"></i> Menu</button>
        <div id="content-container">
            <!-- Konten Pertemuan 10 -->
            <div class="pertemuan-content-area">
                <h1>Pertemuan 10: Viewing dan Clipping</h1>
                
                <p>Pada pertemuan ini, kita akan mempelajari konsep viewing dan clipping dalam grafika komputer. Viewing adalah proses menentukan bagian dari dunia yang akan ditampilkan, sedangkan clipping adalah proses memotong objek yang berada di luar area tampilan.</p>
                
                <!-- Bagian Visual Interaktif -->
                <div class="interactive-section">
                    <h3>Visualisasi Interaktif Clipping Garis (Cohen-Sutherland)</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Clipping Window:</label>
                            <div class="input-grid">
                                <div class="input-item">
                                    <span>Xmin:</span>
                                    <input type="number" id="clipXmin" value="100">
                                </div>
                                <div class="input-item">
                                    <span>Ymin:</span>
                                    <input type="number" id="clipYmin" value="100">
                                </div>
                                <div class="input-item">
                                    <span>Xmax:</span>
                                    <input type="number" id="clipXmax" value="300">
                                </div>
                                <div class="input-item">
                                    <span>Ymax:</span>
                                    <input type="number" id="clipYmax" value="200">
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Garis (P1 ke P2):</label>
                            <div class="input-grid">
                                <div class="input-item">
                                    <span>X1:</span>
                                    <input type="number" id="lineX1" value="50">
                                </div>
                                <div class="input-item">
                                    <span>Y1:</span>
                                    <input type="number" id="lineY1" value="50">
                                </div>
                                <div class="input-item">
                                    <span>X2:</span>
                                    <input type="number" id="lineX2" value="350">
                                </div>
                                <div class="input-item">
                                    <span>Y2:</span>
                                    <input type="number" id="lineY2" value="250">
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="button-group">
                                <button onclick="applyClipping()">Apply Clipping</button>
                                <button onclick="randomGenerateAndApply()">Random Generate</button>
                            </div>
                        </div>
                    </div>
                    <div class="canvas-container">
                        <canvas id="clipCanvas" width="400" height="300"></canvas>
                    </div>
                    <div class="info">
                        <p>Garis <span style="color:gray; font-weight:bold;">abu-abu</span> adalah garis asli. Garis <span style="color:red; font-weight:bold;">merah</span> adalah bagian garis setelah clipping.</p>
                        <p id="clipStatus">Status: Menunggu input...</p>
                    </div>
                </div>

                <!-- Bagian Konsep Dasar -->
                <h2>Konsep Dasar Viewing dan Clipping</h2>
                
                <p>Viewing dan clipping adalah dua konsep fundamental dalam grafika komputer yang memungkinkan kita untuk menampilkan bagian tertentu dari sebuah scene. Proses ini mirip dengan cara kerja kamera dalam dunia nyata, di mana kita menentukan area yang ingin difokuskan dan membuang bagian yang tidak perlu.</p>
                
                <div class="formula-section">
                    <div class="formula-title">Komponen Utama dalam Viewing:</div>
                    <ul>
                        <li><strong>Window</strong>: Area dalam koordinat dunia yang ingin ditampilkan</li>
                        <li><strong>Viewport</strong>: Area dalam koordinat perangkat di mana window akan dipetakan</li>
                        <li><strong>Viewing Transformation</strong>: Proses memetakan koordinat dari window ke viewport</li>
                        <li><strong>Clipping</strong>: Proses memotong objek yang berada di luar window</li>
                    </ul>
                </div>

                <!-- Bagian Transformasi Window-to-Viewport -->
                <h2>Transformasi Window-to-Viewport</h2>
                
                <p>Transformasi window-to-viewport adalah proses memetakan koordinat dari window (dalam koordinat dunia) ke viewport (dalam koordinat perangkat). Proses ini melibatkan scaling dan translasi.</p>
                
                <div class="math-container">
                    <div class="math">
                        <div class="math-line">Untuk memetakan titik (x<span class="sub">w</span>, y<span class="sub">w</span>) dari window ke (x<span class="sub">v</span>, y<span class="sub">v</span>) di viewport:</div>
                        <div class="math-line">s<span class="sub">x</span> = <div class="frac"><span class="num">x<span class="sub">v_max</span> - x<span class="sub">v_min</span></span><span class="den">x<span class="sub">w_max</span> - x<span class="sub">w_min</span></span></div></div>
                        <div class="math-line">s<span class="sub">y</span> = <div class="frac"><span class="num">y<span class="sub">v_max</span> - y<span class="sub">v_min</span></span><span class="den">y<span class="sub">w_max</span> - y<span class="sub">w_min</span></span></div></div>
                        <div class="math-line">x<span class="sub">v</span> = x<span class="sub">v_min</span> + (x<span class="sub">w</span> - x<span class="sub">w_min</span>) × s<span class="sub">x</span></div>
                        <div class="math-line">y<span class="sub">v</span> = y<span class="sub">v_min</span> + (y<span class="sub">w</span> - y<span class="sub">w_min</span>) × s<span class="sub">y</span></div>
                    </div>
                </div>

                <!-- Bagian Transformasi Viewing Umum -->
                <h3>Transformasi Viewing Umum</h3>
                
                <p>Transformasi viewing umum melibatkan perubahan dari sistem koordinat dunia ke sistem koordinat viewing. Ini melibatkan translasi dan rotasi untuk memposisikan dan mengorientasikan "kamera" virtual.</p>
                
                <div class="math-container">
                    <div class="math">
                        <div class="math-line">Titik P<span class="sub">viewer</span> dalam sistem koordinat viewing diperoleh dari P<span class="sub">world</span> dalam sistem koordinat dunia menggunakan matriks transformasi M:</div>
                        <div class="math-line">P<span class="sub">viewer</span> = M × P<span class="sub">world</span></div>
                    </div>
                </div>
                
                <p>Matriks M adalah komposisi dari translasi untuk memindahkan titik pandang ke origin dan rotasi untuk menyelaraskan sumbu-sumbu viewing.</p>

                <!-- Bagian Point Clipping -->
                <h2>Point Clipping</h2>
                
                <p>Point clipping adalah proses paling sederhana dalam clipping, di mana kita menentukan apakah sebuah titik berada di dalam atau di luar window clipping.</p>
                
                <div class="math-container">
                    <div class="math">
                        <div class="math-line">Sebuah titik P(x, y) berada di dalam clipping window (x<span class="sub">w_min</span>, y<span class="sub">w_min</span>) - (x<span class="sub">w_max</span>, y<span class="sub">w_max</span>) jika:</div>
                        <div class="math-line">x<span class="sub">w_min</span> ≤ x ≤ x<span class="sub">w_max</span></div>
                        <div class="math-line">y<span class="sub">w_min</span> ≤ y ≤ y<span class="sub">w_max</span></div>
                    </div>
                </div>

                <!-- Bagian Line Clipping -->
                <h2>Line Clipping</h2>
                
                <p>Line clipping adalah proses memotong garis yang berada di luar window clipping. Salah satu algoritma yang paling umum digunakan adalah algoritma Cohen-Sutherland.</p>
                
                <h3>Algoritma Clipping Garis Cohen-Sutherland</h3>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <p>Setiap endpoint garis diberi kode 4-bit (outcode) berdasarkan posisinya relatif terhadap window.</p>
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">Outcode: TBRL (Top, Bottom, Right, Left)</div>
                                <div class="math-line">Bit Top (T) = 1 jika y > y<span class="sub">max</span></div>
                                <div class="math-line">Bit Bottom (B) = 1 jika y < y<span class="sub">min</span></div>
                                <div class="math-line">Bit Right (R) = 1 jika x > x<span class="sub">max</span></div>
                                <div class="math-line">Bit Left (L) = 1 jika x < x<span class="sub">min</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="algorithm-step">
                        <p><strong>Trivial Accept:</strong> Jika kedua outcode adalah 0000, maka garis sepenuhnya berada di dalam window.</p>
                    </div>
                    <div class="algorithm-step">
                        <p><strong>Trivial Reject:</strong> Jika AND bitwise dari kedua outcode tidak sama dengan 0000, maka garis sepenuhnya berada di luar window.</p>
                    </div>
                    <div class="algorithm-step">
                        <p><strong>Clipping Diperlukan:</strong> Jika tidak termasuk dua kasus di atas, maka garis perlu di-clip.</p>
                        <p>Proses clipping:</p>
                        <ol>
                            <li>Pilih salah satu endpoint yang berada di luar window.</li>
                            <li>Hitung titik potong garis dengan batas window.</li>
                            <li>Ganti endpoint yang berada di luar dengan titik potong.</li>
                            <li>Ulangi proses sampai kedua endpoint berada di dalam window atau garis ditolak.</li>
                        </ol>
                    </div>
                </div>

                <!-- Bagian Contoh Perhitungan -->
                <div class="example-calculation">
                    <h4>Contoh Perhitungan Detail Clipping Garis (Cohen-Sutherland)</h4>
                    
                    <p>Misalkan kita memiliki sebuah window clipping dengan batas:</p>
                    <ul>
                        <li>X<span class="sub">min</span> = 100, Y<span class="sub">min</span> = 100</li>
                        <li>X<span class="sub">max</span> = 300, Y<span class="sub">max</span> = 200</li>
                    </ul>
                    
                    <p>Dan sebuah garis yang akan di-clip dari P1(x1, y1) ke P2(x2, y2):</p>
                    <ul>
                        <li>P1 = (50, 150)</li>
                        <li>P2 = (350, 150)</li>
                    </ul>
                    
                    <div class="calculation-step">
                        <h5>Langkah 1: Hitung Outcode untuk setiap endpoint</h5>
                        <p>Outcode direpresentasikan sebagai 4 bit: TBRL (Top, Bottom, Right, Left).</p>
                        
                        <p>Untuk P1(50, 150):</p>
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">x1 (50) < X<span class="sub">min</span> (100) → Bit Left (L) = 1</div>
                                <div class="math-line">y1 (150) berada antara Y<span class="sub">min</span> (100) dan Y<span class="sub">max</span> (200) → T = 0, B = 0</div>
                                <div class="math-line">Outcode P1 = 0001</div>
                            </div>
                        </div>
                        
                        <p>Untuk P2(350, 150):</p>
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">x2 (350) > X<span class="sub">max</span> (300) → Bit Right (R) = 1</div>
                                <div class="math-line">y2 (150) berada antara Y<span class="sub">min</span> (100) dan Y<span class="sub">max</span> (200) → T = 0, B = 0</div>
                                <div class="math-line">Outcode P2 = 0010</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Langkah 2: Cek Trivial Accept atau Trivial Reject</h5>
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">Trivial Accept: Jika (Outcode P1 OR Outcode P2) = 0000</div>
                                <div class="math-line">0001 OR 0010 = 0011 ≠ 0000 → Bukan Trivial Accept</div>
                                <div class="math-line">Trivial Reject: Jika (Outcode P1 AND Outcode P2) ≠ 0000</div>
                                <div class="math-line">0001 AND 0010 = 0000 → Bukan Trivial Reject</div>
                            </div>
                        </div>
                        <p>Karena bukan keduanya, maka garis perlu di-clip.</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Langkah 3: Lakukan Clipping</h5>
                        <p>Pilih endpoint yang di luar (misalnya P1 dengan outcode 0001 - Left).</p>
                        <p>Hitung titik potong dengan batas kiri (x = X<span class="sub">min</span> = 100).</p>
                        
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">Rumus titik potong y: y = y1 + (y2 - y1) × <div class="frac"><span class="num">X<span class="sub">min</span> - x1</span><span class="den">x2 - x1</span></div></div>
                                <div class="math-line">y = 150 + (150 - 150) × <div class="frac"><span class="num">100 - 50</span><span class="den">350 - 50</span></div></div>
                                <div class="math-line">y = 150 + 0 × <div class="frac"><span class="num">50</span><span class="den">300</span></div></div>
                                <div class="math-line">y = 150</div>
                            </div>
                        </div>
                        
                        <p>Titik potong P1' adalah (100, 150). Ganti P1 dengan P1'. Outcode P1' (100, 150) adalah 0000 (INSIDE).</p>
                        <p>Sekarang garisnya adalah P1'(100, 150) dan P2(350, 150). Outcode P1' = 0000, Outcode P2 = 0010.</p>
                    </div>
                    
                    <div class="calculation-step">
                        <h5>Ulangi proses dengan P1' dan P2</h5>
                        <p>Pilih endpoint yang di luar (P2 dengan outcode 0010 - Right).</p>
                        <p>Hitung titik potong dengan batas kanan (x = X<span class="sub">max</span> = 300).</p>
                        
                        <div class="math-container">
                            <div class="math">
                                <div class="math-line">Rumus titik potong y: y = y1' + (y2 - y1') × <div class="frac"><span class="num">X<span class="sub">max</span> - x1'</span><span class="den">x2 - x1'</span></div></div>
                                <div class="math-line">y = 150 + (150 - 150) × <div class="frac"><span class="num">300 - 100</span><span class="den">350 - 100</span></div></div>
                                <div class="math-line">y = 150 + 0 × <div class="frac"><span class="num">200</span><span class="den">250</span></div></div>
                                <div class="math-line">y = 150</div>
                            </div>
                        </div>
                        
                        <p>Titik potong P2' adalah (300, 150). Ganti P2 dengan P2'. Outcode P2' (300, 150) adalah 0000 (INSIDE).</p>
                    </div>
                    
                    <div class="calculation-result">
                        <p>Sekarang garisnya adalah P1'(100, 150) dan P2'(300, 150). Outcode P1' = 0000, Outcode P2' = 0000.</p>
                        <p>Karena (Outcode P1' OR Outcode P2') = 0000, ini adalah Trivial Accept.</p>
                        <p>Jadi, segmen garis yang terlihat setelah clipping adalah dari <strong>(100, 150)</strong> ke <strong>(300, 150)</strong>.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Embedded JS for Sidebar -->
    <script>
        function openNav() {
            const sidebarWidth = window.innerWidth > 768 ? "280px" : "41%";
            document.getElementById("sidebar").style.width = sidebarWidth;
            if (window.innerWidth > 768) { // Only adjust margin on larger screens
                document.getElementById("main").style.marginLeft = sidebarWidth;
            }
        }

        function closeNav() {
            document.getElementById("sidebar").style.width = "0";
            if (window.innerWidth > 768) { // Only adjust margin on larger screens
                 document.getElementById("main").style.marginLeft= "0";
            }
        }

        // Optional: Close sidebar if clicking outside of it on mobile
        document.getElementById("main").addEventListener("click", function(event) {
            if (window.innerWidth <= 768 && document.getElementById("sidebar").style.width !== "0px" && document.getElementById("sidebar").style.width !== "") {
                // Check if the click was outside the sidebar and not on the open button
                if (!document.getElementById("sidebar").contains(event.target) && !event.target.closest(".openbtn")) {
                    closeNav();
                }
            }
        });
    </script>

    <!-- Embedded JS for Clipping Visualization -->
    <script>
        const canvas = document.getElementById('clipCanvas');
        const ctx = canvas.getContext('2d');
        const statusElem = document.getElementById('clipStatus');
        
        // Make canvas responsive
        function resizeCanvas() {
            const container = document.querySelector('.canvas-container');
            const containerWidth = container.clientWidth;
            
            // Set canvas display size (css pixels)
            canvas.style.width = containerWidth + 'px';
            canvas.style.height = (containerWidth * 0.75) + 'px'; // 4:3 aspect ratio
            
            // Set actual size in memory (scaled to account for extra pixel density)
            const scale = window.devicePixelRatio;
            canvas.width = Math.floor(containerWidth * scale);
            canvas.height = Math.floor(containerWidth * 0.75 * scale);
            
            // Normalize coordinate system to use css pixels
            ctx.scale(scale, scale);
            
            // Redraw everything after resizing
            applyClipping();
        }
        
        // Initial resize and add event listener for window resize
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', resizeCanvas);

        // Cohen-Sutherland constants
        const INSIDE = 0; // 0000
        const LEFT = 1;   // 0001
        const RIGHT = 2;  // 0010
        const BOTTOM = 4; // 0100
        const TOP = 8;    // 1000

        let clipWindow = { xmin: 100, ymin: 100, xmax: 300, ymax: 200 };
        let line = { x1: 50, y1: 50, x2: 350, y2: 250 };

        // Function to compute region code for a point(x, y)
        function computeOutCode(x, y) {
            let code = INSIDE;
            if (x < clipWindow.xmin) code |= LEFT;
            else if (x > clipWindow.xmax) code |= RIGHT;
            if (y < clipWindow.ymin) code |= BOTTOM;
            else if (y > clipWindow.ymax) code |= TOP;
            return code;
        }

        // Function to draw the scene
        function drawScene(clippedLine) {
            // Get current canvas dimensions
            const canvasWidth = canvas.width / window.devicePixelRatio;
            const canvasHeight = canvas.height / window.devicePixelRatio;
            
            // Scale coordinates to fit current canvas size
            const scaleX = canvasWidth / 400;
            const scaleY = canvasHeight / 300;
            
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            // Draw clipping window
            ctx.strokeStyle = 'blue';
            ctx.lineWidth = 1;
            ctx.strokeRect(
                clipWindow.xmin * scaleX, 
                clipWindow.ymin * scaleY, 
                (clipWindow.xmax - clipWindow.xmin) * scaleX, 
                (clipWindow.ymax - clipWindow.ymin) * scaleY
            );

            // Draw original line (gray)
            ctx.strokeStyle = 'gray';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(line.x1 * scaleX, line.y1 * scaleY);
            ctx.lineTo(line.x2 * scaleX, line.y2 * scaleY);
            ctx.stroke();

            // Draw clipped line (red)
            if (clippedLine) {
                ctx.strokeStyle = 'red';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(clippedLine.x1 * scaleX, clippedLine.y1 * scaleY);
                ctx.lineTo(clippedLine.x2 * scaleX, clippedLine.y2 * scaleY);
                ctx.stroke();
            }
        }

        // Cohen-Sutherland clipping algorithm
        function cohenSutherlandClip(x1, y1, x2, y2) {
            let outcode1 = computeOutCode(x1, y1);
            let outcode2 = computeOutCode(x2, y2);
            let accept = false;

            while (true) {
                if (!(outcode1 | outcode2)) { // Both endpoints inside window
                    accept = true;
                    statusElem.textContent = "Status: Garis diterima (sepenuhnya di dalam).";
                    break;
                } else if (outcode1 & outcode2) { // Both endpoints outside window, on same side
                    statusElem.textContent = "Status: Garis ditolak (sepenuhnya di luar).";
                    break;
                } else {
                    // Line needs clipping
                    statusElem.textContent = "Status: Garis perlu dipotong.";
                    let x, y;
                    // Pick an endpoint outside the window
                    let outcodeOut = outcode1 ? outcode1 : outcode2;

                    // Find intersection point
                    if (outcodeOut & TOP) { // point is above the clip window
                        x = x1 + (x2 - x1) * (clipWindow.ymax - y1) / (y2 - y1);
                        y = clipWindow.ymax;
                    } else if (outcodeOut & BOTTOM) { // point is below the clip window
                        x = x1 + (x2 - x1) * (clipWindow.ymin - y1) / (y2 - y1);
                        y = clipWindow.ymin;
                    } else if (outcodeOut & RIGHT) { // point is to the right of clip window
                        y = y1 + (y2 - y1) * (clipWindow.xmax - x1) / (x2 - x1);
                        x = clipWindow.xmax;
                    } else if (outcodeOut & LEFT) { // point is to the left of clip window
                        y = y1 + (y2 - y1) * (clipWindow.xmin - x1) / (x2 - x1);
                        x = clipWindow.xmin;
                    }

                    // Replace outside point with intersection point
                    if (outcodeOut === outcode1) {
                        x1 = x;
                        y1 = y;
                        outcode1 = computeOutCode(x1, y1);
                    } else {
                        x2 = x;
                        y2 = y;
                        outcode2 = computeOutCode(x2, y2);
                    }
                }
            }

            if (accept) {
                return { x1: x1, y1: y1, x2: x2, y2: y2 };
            } else {
                return null; // Line is completely outside
            }
        }
        
        // Improved function to generate random values and apply clipping
        function randomGenerateAndApply() {
            // Get current canvas dimensions
            const canvasWidth = canvas.width / window.devicePixelRatio;
            const canvasHeight = canvas.height / window.devicePixelRatio;
            
            // Ensure the clipping window is of reasonable size and within canvas
            const minWindowSize = Math.min(canvasWidth, canvasHeight) * 0.2; // At least 20% of canvas
            const maxWindowSize = Math.min(canvasWidth, canvasHeight) * 0.7; // At most 70% of canvas
            
            // Generate window size
            const windowWidth = Math.floor(Math.random() * (maxWindowSize - minWindowSize)) + minWindowSize;
            const windowHeight = Math.floor(Math.random() * (maxWindowSize - minWindowSize)) + minWindowSize;
            
            // Generate window position (ensuring it's fully within canvas)
            const xmin = Math.floor(Math.random() * (canvasWidth - windowWidth));
            const ymin = Math.floor(Math.random() * (canvasHeight - windowHeight));
            const xmax = xmin + windowWidth;
            const ymax = ymin + windowHeight;
            
            // Update window values
            document.getElementById('clipXmin').value = xmin;
            document.getElementById('clipYmin').value = ymin;
            document.getElementById('clipXmax').value = xmax;
            document.getElementById('clipYmax').value = ymax;
            
            // Generate line that has a good chance of intersecting the window
            // Strategy: Pick one point inside or near the window, and one point further away
            
            // First point: either inside the window or slightly outside
            const insideChance = 0.7; // 70% chance of first point being inside
            let x1, y1;
            
            if (Math.random() < insideChance) {
                // Inside the window
                x1 = Math.floor(Math.random() * (xmax - xmin)) + xmin;
                y1 = Math.floor(Math.random() * (ymax - ymin)) + ymin;
            } else {
                // Slightly outside the window
                const margin = Math.min(windowWidth, windowHeight) * 0.3;
                x1 = Math.floor(Math.random() * (windowWidth + 2 * margin)) + (xmin - margin);
                y1 = Math.floor(Math.random() * (windowHeight + 2 * margin)) + (ymin - margin);
                
                // Ensure it's within canvas
                x1 = Math.max(0, Math.min(canvasWidth, x1));
                y1 = Math.max(0, Math.min(canvasHeight, y1));
            }
            
            // Second point: further away, but still within canvas
            // Pick a direction (0-7) and distance
            const direction = Math.floor(Math.random() * 8); // 8 directions
            const minDistance = Math.min(windowWidth, windowHeight) * 0.5;
            const maxDistance = Math.min(canvasWidth, canvasHeight) * 0.8;
            const distance = Math.floor(Math.random() * (maxDistance - minDistance)) + minDistance;
            
            let x2, y2;
            
            // Calculate second point based on direction and distance
            switch(direction) {
                case 0: // Right
                    x2 = x1 + distance;
                    y2 = y1;
                    break;
                case 1: // Right-Down
                    x2 = x1 + distance;
                    y2 = y1 + distance;
                    break;
                case 2: // Down
                    x2 = x1;
                    y2 = y1 + distance;
                    break;
                case 3: // Left-Down
                    x2 = x1 - distance;
                    y2 = y1 + distance;
                    break;
                case 4: // Left
                    x2 = x1 - distance;
                    y2 = y1;
                    break;
                case 5: // Left-Up
                    x2 = x1 - distance;
                    y2 = y1 - distance;
                    break;
                case 6: // Up
                    x2 = x1;
                    y2 = y1 - distance;
                    break;
                case 7: // Right-Up
                    x2 = x1 + distance;
                    y2 = y1 - distance;
                    break;
            }
            
            // Ensure second point is within canvas
            x2 = Math.max(0, Math.min(canvasWidth, x2));
            y2 = Math.max(0, Math.min(canvasHeight, y2));
            
            // Update line values
            document.getElementById('lineX1').value = x1;
            document.getElementById('lineY1').value = y1;
            document.getElementById('lineX2').value = x2;
            document.getElementById('lineY2').value = y2;
            
            // Apply the new values
            applyClipping();
        }

        // Function to get inputs and trigger clipping
        function applyClipping() {
            // Update clip window from inputs
            clipWindow.xmin = parseInt(document.getElementById('clipXmin').value);
            clipWindow.ymin = parseInt(document.getElementById('clipYmin').value);
            clipWindow.xmax = parseInt(document.getElementById('clipXmax').value);
            clipWindow.ymax = parseInt(document.getElementById('clipYmax').value);

            // Update line from inputs
            line.x1 = parseInt(document.getElementById('lineX1').value);
            line.y1 = parseInt(document.getElementById('lineY1').value);
            line.x2 = parseInt(document.getElementById('lineX2').value);
            line.y2 = parseInt(document.getElementById('lineY2').value);

            // Perform clipping
            const clipped = cohenSutherlandClip(line.x1, line.y1, line.x2, line.y2);

            // Draw the result
            drawScene(clipped);
        }

        // Initial draw
        document.addEventListener('DOMContentLoaded', function() {
            resizeCanvas();
            applyClipping();
        });
    </script>
</body>
</html>
